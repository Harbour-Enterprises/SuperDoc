<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://unpkg.com/@harbour-enterprises/superdoc@latest/dist/style.css">
  <script type="module" src="https://unpkg.com/@harbour-enterprises/superdoc@latest/dist/superdoc.umd.js"></script>
  <link rel="stylesheet" href="./file-upload.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SuperDoc - Style Precedence</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .title {
      font-size: 18px;
    }
    
    /* CSS Precedence Test - Glaringly obvious styles for document elements */
    body.enable-intrusive-styles p,
    body.enable-intrusive-styles h1,
    body.enable-intrusive-styles h2,
    body.enable-intrusive-styles h3,
    body.enable-intrusive-styles h4,
    body.enable-intrusive-styles h5,
    body.enable-intrusive-styles h6,
    body.enable-intrusive-styles li,
    body.enable-intrusive-styles span {
      background-color: #d597d5 ;
      color: #00ff00 ;
      border: 3px solid #ffff00 ;
      padding: 1em ;
      margin: 1em ;
    }
  </style>
  <style>
    /* include your intrusive style fix here */

  /* CSS isolation for SuperEditor - resets all properties and makes elements 
     only use programmatic and inline styles */
     .super-editor p,
     .super-editor h1,
     .super-editor h2, 
     .super-editor h3,
     .super-editor h4,
     .super-editor h5,
     .super-editor h6,
     .super-editor li,
     .super-editor strong,
     .super-editor em,
     .super-editor b,
     .super-editor i,
     .super-editor u,
     .super-editor a,
     .super-editor blockquote,
     .super-editor ul,
     .super-editor ol {
       margin: 0 !important;
       padding: 0 !important;
       color: unset !important;
       background-color: unset !important;
       outline: none !important;
       border: none !important;
     }

     /* Handle spans separately - reset all except track changes */
     .super-editor span {
       margin: 0 !important;
       padding: 0 !important;
       outline: none !important;
       border: none !important;
     }

     /* Reset background color only for non-track-change spans */
     .super-editor span:not(.track-insert):not(.track-delete) {
       background-color: unset !important;
     }
  </style>
</head>
<body>

  <div class="title">SuperDoc - CDN example</div>
  <div id="my-toolbar"></div>

  <button class="file-upload-button">Load Document</button>
  <input class="file-upload-input" style="display: none;" type="file" accept=".docx">
  
  <button id="toggle-styles" style="margin: 10px; padding: 8px 16px; background-color: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">
    Toggle Intrusive Styles (Currently: ON)
  </button>

  <div id="superdoc"></div>

  <script type="module">
    const config = {
      selector: '#superdoc',
      toolbar: '#my-toolbar',
      document: './sample.docx', // URL, File or document config
      documentMode: 'editing',
      pagination: true,
      rulers: true,
      onReady: (event) => {
        console.log('SuperDoc is ready', event);
      },
      onEditorCreate: (event) => {
        console.log('Editor is created', event);
      },
    };

    const superdoc = new SuperDocLibrary.SuperDoc(config);

    window.addEventListener('file-upload', (event) => {
      new SuperDocLibrary.SuperDoc({...config, document: event.detail}); 
    });

    // Intrusive Styles Toggle
    let stylesEnabled = true;
    const toggleButton = document.getElementById('toggle-styles');
    
    // Initialize with intrusive styles enabled
    document.body.classList.add('enable-intrusive-styles');
    
    toggleButton.addEventListener('click', () => {
      stylesEnabled = !stylesEnabled;
      
      if (stylesEnabled) {
        document.body.classList.add('enable-intrusive-styles');
        toggleButton.textContent = 'Toggle Intrusive Styles (Currently: ON)';
        toggleButton.style.backgroundColor = '#dc3545';
      } else {
        document.body.classList.remove('enable-intrusive-styles');
        toggleButton.textContent = 'Toggle Intrusive Styles (Currently: OFF)';
        toggleButton.style.backgroundColor = '#28a745';
      }
    });
  </script>
  <script type="module" src="./file-upload.js"></script>

</body>
</html>
