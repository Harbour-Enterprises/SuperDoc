# TypeScript Declarations Fix (SD-494)

## Problem

TypeScript's `tsc` compiler had trouble following `export *` chains when generating `.d.ts` files from JavaScript source files with barrel exports. This caused "Module has no exported member 'SuperDoc'" errors in TypeScript projects using the library.

## Solution Implemented

### 1. Replaced `export *` with Explicit Named Exports

**File: `src/core/index.js`**

```javascript
// Before:
export * from './SuperDoc.js';

// After:
export { SuperDoc } from './SuperDoc.js';
```

**File: `src/index.js`**

```javascript
// Before:
export * from './core/index.js';

// After:
export { SuperDoc } from './core/index.js';
```

This change allows TypeScript to properly trace the export chain and generate correct type declarations.

### 2. Updated TypeScript Configuration

**File: `tsconfig.json`**

- Updated target from ES2019 to ES2022 to support private class fields (#private)
- This prevents TypeScript compilation errors with modern JavaScript syntax

### 3. Added Build Verification Script

**File: `scripts/verify-exports.js`**

- Automated verification that SuperDoc is properly exported in `dist/index.d.ts`
- Checks for critical exports from dependencies
- Runs automatically after the build process

**File: `package.json`**

- Added `verify-exports` script
- Integrated verification into the main `build` command

## Results

The TypeScript declaration file `dist/index.d.ts` now correctly exports SuperDoc:

```typescript
export { SuperDoc } from './core/index.js';
// ... other exports
```

TypeScript projects can now import SuperDoc without errors:

```typescript
import { SuperDoc } from 'superdoc';

const superdoc = new SuperDoc({
  selector: '#superdoc',
  document: { url: 'test.docx', type: 'docx' },
});
```

## Verification

Run `npm run verify-exports` to verify that the TypeScript declarations are correctly generated.

## Notes

- The library continues to use JavaScript with JSDoc for the source code
- Type declarations are automatically generated by TypeScript's `tsc` compiler
- The explicit exports make the barrel export chain transparent to TypeScript
- No changes were required to the actual SuperDoc class implementation
